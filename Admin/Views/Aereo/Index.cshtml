@{
    ViewData["Title"] = "Home Page";
}

@model AereoViewModel

<div class="row mb-3">
    <div class="col-md-4">
        <input type="text" id="nome" class="form-control" placeholder="Buscar por nome" />
    </div>
    <div class="col-md-4">
        <input type="text" id="email" class="form-control" placeholder="Buscar por email" />
    </div>
    <div class="col-md-4">
        <button id="filtrar" class="btn btn-primary">Filtrar</button>
    </div>
</div>

<table id="clientesTable" class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Nome</th>
            <th>Email</th>
            <th>Telefone</th>
            <th>Ações</th>
        </tr>
    </thead>
</table>

<script>
    $(document).ready(function () {
        var tabela = $('#clientesTable').DataTable({
            processing: true,
            serverSide: true,
            ajax: {
                url: '@Url.Action("Get", "Aereo")',
                type: 'GET',
                data: function (d) {
                    d.Classe = $('#nome').val();
                    d.Preco = $('#email').val();
                }
            },
            columns: [
                { data: "classe" },
                { data: "preco" },
                {
                    data: null,
                    render: function (data, type, row) {
                        return `
                            <a href="/Clientes/Edit/${row.id}" class="btn btn-warning btn-sm">Editar</a>
                            <a href="/Clientes/Delete/${row.id}" class="btn btn-danger btn-sm">Excluir</a>
                        `;
                    }
                }
            ],
            language: {
                url: "//cdn.datatables.net/plug-ins/1.13.6/i18n/pt-BR.json"
            },
            pageLength: 10
        });

        $('#filtrar').on('click', function () {
            tabela.ajax.reload();
        });
    });
</script>